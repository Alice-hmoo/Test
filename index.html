<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Heart for You - Valentine's Day</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            min-height: 100vh;
            background: linear-gradient(135deg, #ffafcc 0%, #ffc8dd 50%, #ffafcc 100%);
            color: #590d22;
            overflow-x: hidden;
            position: relative;
        }
        
        .page {
            display: none;
            min-height: 100vh;
            padding: 2rem;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            position: relative;
            z-index: 1;
        }
        
        .active-page {
            display: flex;
        }
        
        h1 {
            font-size: 3.5rem;
            margin-bottom: 1.5rem;
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.7);
            background: linear-gradient(to right, #9d174d, #be185d);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }
        
        h2 {
            font-size: 2.5rem;
            margin-bottom: 1rem;
            color: #7c193c;
        }
        
        .photo-container {
            width: 90%;
            max-width: 500px;
            height: 400px;
            margin: 2rem auto;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 15px 35px rgba(137, 18, 66, 0.2);
            position: relative;
            border: 10px solid rgba(255, 255, 255, 0.3);
            background-color: rgba(255, 255, 255, 0.2);
        }
        
        .page-photo {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s;
        }
        
        .page-photo:hover {
            transform: scale(1.03);
        }
        
        .question {
            font-size: 1.8rem;
            margin: 2rem 0;
            padding: 1.5rem 2rem;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 20px;
            backdrop-filter: blur(10px);
            max-width: 800px;
            color: #590d22;
            box-shadow: 0 8px 20px rgba(137, 18, 66, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.4);
        }
        
        /* Buttons Container */
        .buttons-container {
            position: relative;
            margin-top: 2rem;
            min-height: 180px;
            width: 100%;
            max-width: 500px;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        /* Yes Button - SMALLER and PINKER */
        .yes-button {
            background: linear-gradient(to right, #ff69b4, #ff1493);
            color: white;
            border: none;
            padding: 1rem 2.5rem;
            font-size: 1.6rem;
            border-radius: 50px;
            cursor: pointer;
            box-shadow: 0 10px 25px rgba(255, 20, 147, 0.4);
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
            font-weight: 600;
            letter-spacing: 1px;
            z-index: 3;
            /* Smaller size */
            width: auto;
            min-width: 140px;
        }
        
        .yes-button:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(255, 20, 147, 0.6);
            background: linear-gradient(to right, #ff85c1, #ff69b4);
        }
        
        .yes-button:active {
            transform: translateY(0);
        }
        
        .yes-button::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 5px;
            height: 5px;
            background: rgba(255, 255, 255, 0.5);
            opacity: 0;
            border-radius: 100%;
            transform: scale(1, 1) translate(-50%);
            transform-origin: 50% 50%;
        }
        
        .yes-button:focus:not(:active)::after {
            animation: ripple 1s ease-out;
        }
        
        /* No Button */
        .no-button {
            background: linear-gradient(to right, #6c757d, #495057);
            color: white;
            border: none;
            padding: 0.8rem 2rem;
            font-size: 1.3rem;
            border-radius: 50px;
            cursor: pointer;
            box-shadow: 0 5px 15px rgba(108, 117, 125, 0.4);
            transition: all 0.3s;
            position: absolute;
            z-index: 2;
            font-weight: 600;
            /* Smaller to match Yes button */
            width: auto;
            min-width: 100px;
        }
        
        .no-button:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 20px rgba(108, 117, 125, 0.6);
        }
        
        /* No button rotating animation - SMALLER RADIUS */
        .no-button.rotate-around {
            animation: rotateAround 15s linear infinite;
        }
        
        /* No button moving to opposite side animation */
        .no-button.move-to-opposite {
            animation: moveToOpposite 0.8s ease-out forwards;
        }
        
        @keyframes rotateAround {
            0% {
                transform: rotate(0deg) translateX(100px) rotate(0deg);
            }
            100% {
                transform: rotate(360deg) translateX(100px) rotate(-360deg);
            }
        }
        
        @keyframes moveToOpposite {
            0% {
                transform: translate(var(--start-x), var(--start-y));
            }
            100% {
                transform: translate(var(--end-x), var(--end-y));
            }
        }
        
        @keyframes ripple {
            0% {
                transform: scale(0, 0);
                opacity: 0.5;
            }
            100% {
                transform: scale(40, 40);
                opacity: 0;
            }
        }
        
        .letter-container {
            max-width: 800px;
            background: rgba(255, 255, 255, 0.3);
            padding: 2.5rem;
            border-radius: 25px;
            margin: 2rem auto;
            text-align: left;
            backdrop-filter: blur(10px);
            line-height: 1.8;
            font-size: 1.3rem;
            box-shadow: 0 15px 35px rgba(137, 18, 66, 0.15);
            color: #590d22;
            border: 2px solid rgba(255, 255, 255, 0.4);
        }
        
        .letter-container p {
            margin-bottom: 1.5rem;
            text-indent: 1.5rem;
        }
        
        .signature {
            text-align: right;
            font-style: italic;
            font-size: 1.5rem;
            margin-top: 2rem;
            color: #9d174d;
            font-weight: 600;
        }
        
        .heart-shapes {
            position: absolute;
            bottom: 150px;
            width: 100%;
            height: 200px;
            z-index: 2;
            pointer-events: none;
        }
        
        .heart {
            position: absolute;
            bottom: 0;
            background-color: #ff4d8d;
            display: inline-block;
            height: 30px;
            margin: 0 10px;
            position: relative;
            top: 0;
            transform: rotate(-45deg);
            width: 30px;
            animation: floatUp 8s ease-in infinite;
            filter: drop-shadow(0 0 8px rgba(255, 77, 141, 0.7));
        }
        
        .heart:before,
        .heart:after {
            content: "";
            background-color: #ff4d8d;
            border-radius: 50%;
            height: 30px;
            position: absolute;
            width: 30px;
        }
        
        .heart:before {
            top: -15px;
            left: 0;
        }
        
        .heart:after {
            left: 15px;
            top: 0;
        }
        
        .heart:nth-child(2n) {
            background-color: #ff85b1;
            animation-delay: 1s;
            width: 25px;
            height: 25px;
        }
        
        .heart:nth-child(2n):before,
        .heart:nth-child(2n):after {
            background-color: #ff85b1;
            height: 25px;
            width: 25px;
        }
        
        .heart:nth-child(3n) {
            background-color: #ffb3d1;
            animation-delay: 2s;
            width: 20px;
            height: 20px;
        }
        
        .heart:nth-child(3n):before,
        .heart:nth-child(3n):after {
            background-color: #ffb3d1;
            height: 20px;
            width: 20px;
        }
        
        .heart:nth-child(4n) {
            background-color: #ff4d8d;
            animation-delay: 3s;
            width: 35px;
            height: 35px;
        }
        
        .heart:nth-child(4n):before,
        .heart:nth-child(4n):after {
            background-color: #ff4d8d;
            height: 35px;
            width: 35px;
        }
        
        @keyframes floatUp {
            0% {
                transform: rotate(-45deg) translateY(0) scale(1);
                opacity: 1;
            }
            100% {
                transform: rotate(-45deg) translateY(-100vh) scale(0.5);
                opacity: 0;
            }
        }
        
        /* Fireworks */
        .fireworks-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
        }
        
        .firework {
            position: absolute;
            border-radius: 50%;
            box-shadow: 0 0 10px 2px;
        }
        
        .thank-you {
            margin-top: 3rem;
            font-size: 1.8rem;
            color: #9d174d;
            text-align: center;
            padding: 1.5rem;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 20px;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
            backdrop-filter: blur(10px);
            border: 2px solid rgba(255, 255, 255, 0.4);
            box-shadow: 0 10px 25px rgba(137, 18, 66, 0.1);
        }
        
        .audio-controls {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 100;
            background: rgba(255, 255, 255, 0.8);
            padding: 10px 15px;
            border-radius: 50px;
            display: flex;
            align-items: center;
            gap: 10px;
            box-shadow: 0 5px 15px rgba(137, 18, 66, 0.2);
            border: 2px solid rgba(255, 255, 255, 0.9);
        }
        
        .audio-controls button {
            background: transparent;
            border: none;
            color: #9d174d;
            font-size: 1.5rem;
            cursor: pointer;
            width: 45px;
            height: 45px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
        }
        
        .audio-controls button:hover {
            background: rgba(157, 23, 77, 0.1);
            transform: scale(1.1);
        }
        
        .music-upload-container {
            background: rgba(255, 255, 255, 0.9);
            padding: 15px;
            border-radius: 15px;
            margin: 15px 0;
            box-shadow: 0 5px 15px rgba(137, 18, 66, 0.1);
            border: 2px dashed #ff85b1;
            max-width: 500px;
            text-align: left;
        }
        
        .music-upload-container label {
            display: block;
            margin-bottom: 10px;
            color: #7c193c;
            font-weight: 600;
        }
        
        .file-input {
            padding: 10px;
            border-radius: 10px;
            border: 2px solid #ff85b1;
            width: 100%;
            background: white;
            color: #590d22;
        }
        
        .page-counter {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(255, 255, 255, 0.8);
            padding: 10px 20px;
            border-radius: 30px;
            font-size: 1.2rem;
            z-index: 100;
            color: #7c193c;
            font-weight: 600;
            box-shadow: 0 5px 15px rgba(137, 18, 66, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.9);
        }
        
        .instruction-box {
            background: rgba(255, 255, 255, 0.9);
            padding: 15px;
            border-radius: 15px;
            margin: 20px 0;
            max-width: 800px;
            color: #7c193c;
            box-shadow: 0 5px 15px rgba(137, 18, 66, 0.1);
            border: 2px solid #ffb3d1;
            text-align: left;
        }
        
        .code-instruction {
            background: #f8f9fa;
            padding: 10px;
            border-radius: 8px;
            margin: 10px 0;
            font-family: monospace;
            color: #590d22;
            border-left: 4px solid #ff4d8d;
        }
        
        @media (max-width: 768px) {
            h1 {
                font-size: 2.5rem;
            }
            
            h2 {
                font-size: 2rem;
            }
            
            .photo-container {
                width: 95%;
                height: 300px;
            }
            
            .question {
                font-size: 1.5rem;
                padding: 1rem;
            }
            
            .letter-container {
                padding: 1.5rem;
                font-size: 1.1rem;
            }
            
            .yes-button {
                padding: 0.9rem 2rem;
                font-size: 1.4rem;
                min-width: 120px;
            }
            
            .no-button {
                padding: 0.7rem 1.7rem;
                font-size: 1.1rem;
                min-width: 90px;
            }
            
            .audio-controls {
                bottom: 10px;
                right: 10px;
                padding: 8px 12px;
            }
            
            .buttons-container {
                min-height: 160px;
                max-width: 400px;
            }
            
            @keyframes rotateAround {
                0% {
                    transform: rotate(0deg) translateX(80px) rotate(0deg);
                }
                100% {
                    transform: rotate(360deg) translateX(80px) rotate(-360deg);
                }
            }
        }
        
        /* Custom animations for TikTok-like feel */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .fade-in {
            animation: fadeInUp 0.8s ease-out;
        }
        
        /* Custom firework animations */
        @keyframes heartExplode {
            0% { transform: scale(1) rotate(-45deg); opacity: 1; }
            50% { transform: scale(4) rotate(-45deg); opacity: 0.7; }
            100% { transform: scale(8) rotate(-45deg); opacity: 0; }
        }
        
        @keyframes starExplode {
            0% { transform: scale(1); opacity: 1; }
            50% { transform: scale(3) rotate(180deg); opacity: 0.7; }
            100% { transform: scale(6) rotate(360deg); opacity: 0; }
        }
        
        @keyframes circleExplode {
            0% { transform: scale(1); opacity: 1; }
            100% { transform: scale(5); opacity: 0; }
        }
        
        @keyframes ringExplode {
            0% { transform: scale(1); box-shadow: 0 0 10px 2px; opacity: 1; }
            50% { transform: scale(3); box-shadow: 0 0 20px 5px; opacity: 0.7; }
            100% { transform: scale(5); box-shadow: 0 0 30px 10px; opacity: 0; }
        }
    </style>
</head>
<body>
    <!-- Page 1 -->
    <div class="page active-page fade-in" id="page1">
        <h1>Hello babe? Finally, you're here. <3 </h1>
        
        <div class="photo-container">
            <img src="2.jpg" alt="Our special moment" class="page-photo" id="photo1">
        </div>
        
        <div class="question">
            Will you be my Valentine?
        </div>
        
        <div class="buttons-container">
            <button class="yes-button" onclick="goToPage(2)">
                Yes <i class="fas fa-heart" style="margin-left: 10px;"></i>
            </button>
            <button class="no-button rotate-around" id="noButton1">No</button>
        </div>
        
    </div>
    
    <!-- Page 2 -->
    <div class="page fade-in" id="page2">
        <h1>Babe...This is our 2nd Valentine's Day together.</h1>
        
        <div class="photo-container">
            <img src="3.jpg" alt="Our beautiful memories" class="page-photo" id="photo2">
        </div>
        
        <div class="question">
            With each passing day, my love for you grows stronger. Can you feel it?
        </div>
        
        <div class="buttons-container">
            <button class="yes-button" onclick="goToPage(3)">
                Yes <i class="fas fa-heartbeat" style="margin-left: 10px;"></i>
            </button>
            <button class="no-button rotate-around" id="noButton2">No</button>
        </div>
    </div>
    
    <!-- Page 3 -->
    <div class="page fade-in" id="page3">
        <h1>My Love Letter to You</h1>
        
        <div class="photo-container">
            <img src="1.jpg" alt="Our love story" class="page-photo" id="photo3">
        </div>
        
        <!-- Heart shapes that float up -->
        <div class="heart-shapes" id="heartContainer"></div>
        
        <div class="letter-container">
            <p>My Love,</p>
            
            <p>From the moment we met, my life felt different. You came into it so gently, and now I can't imagine my days without you.</p>
            
            <p>I love your smile, your laughter, and the way you make even simple moments feel special.</p>
            
            <p>Being with you feels easy and real. You understand me, support me, and stay by my side no matter what.</p>
            <p>I'm so thankful for you. Whatever the future brings, I want to face it with you.</p>
            
            <p>You have my heart, always.I love you.❤️</p>
            
            <div class="signature">
                With all my love, forever yours<br>
                <span style="font-size: 2rem; color: #ff4d8d;">♥</span>
            </div>
        </div>
        
        <div class="thank-you">
            Happy Valentine's Day, Babe! Thank you for being beside me always.<3
        </div>
        
    </div>
    
    <!-- Fireworks container -->
    <div class="fireworks-container" id="fireworksContainer"></div>
    
    <!-- Audio controls -->
    <div class="audio-controls">
        <div style="margin-right: 10px; font-weight: 600; color: #7c193c;">
            <i class="fas fa-music"></i> Music
        </div>
        <button id="muteButton" title="Mute/Unmute">
            <i class="fas fa-volume-up"></i>
        </button>
        <button id="replayButton" title="Restart Music">
            <i class="fas fa-redo"></i>
        </button>
    </div>
    
    <!-- Page counter -->
    <div class="page-counter">
        Page <span id="currentPage">1</span> of 3
    </div>
    
    <!-- Background music (you can replace the src with your music file) -->
    <audio id="bgMusic" loop>
        <source src="love.mp3" type="audio/mpeg">
        Your browser does not support the audio element.
    </audio>
    
    <!-- Fireworks sound for page 3 (you can replace the src with your fireworks sound) -->
    <audio id="fireworksSound" loop>
        <source src="fireworks.mp3" type="audio/mpeg">
        Your browser does not support the audio element.
    </audio>
    
    <script>
        // Page navigation
        let currentPage = 1;
        
        function goToPage(pageNumber) {
            // Hide current page
            document.getElementById(`page${currentPage}`).classList.remove('active-page');
            
            // Show new page
            currentPage = pageNumber;
            document.getElementById(`page${currentPage}`).classList.add('active-page');
            document.getElementById('currentPage').textContent = currentPage;
            
            // Add fade-in animation
            document.getElementById(`page${currentPage}`).classList.add('fade-in');
            
            // Handle audio based on page
            handlePageAudio();
            
            // Initialize page-specific effects
            if (pageNumber === 3) {
                initHearts();
                initFireworks();
                // Switch to fireworks sound
                document.getElementById('bgMusic').pause();
                // Try to play fireworks sound
                document.getElementById('fireworksSound').play().catch(e => {
                    console.log("Fireworks sound autoplay prevented.");
                });
            } else if (pageNumber === 1 || pageNumber === 2) {
                // Switch back to romantic music
                document.getElementById('fireworksSound').pause();
                // Try to play romantic music
                document.getElementById('bgMusic').play().catch(e => {
                    console.log("Music autoplay prevented.");
                });
                // Initialize rotating no button for pages 1 and 2
                initRotatingNoButton(pageNumber);
            }
        }
        
        // Initialize rotating "No" button for pages 1 and 2
        function initRotatingNoButton(pageNumber) {
            const noButton = document.getElementById(`noButton${pageNumber}`);
            const container = noButton.parentElement;
            const yesButton = container.querySelector('.yes-button');
            
            // Make sure the button has the rotate-around class
            noButton.classList.add('rotate-around');
            
            // Calculate center of yes button
            const containerRect = container.getBoundingClientRect();
            const yesButtonRect = yesButton.getBoundingClientRect();
            
            const centerX = yesButtonRect.left + yesButtonRect.width/2 - containerRect.left;
            const centerY = yesButtonRect.top + yesButtonRect.height/2 - containerRect.top;
            
            // Position no button at the starting point of the rotation
            noButton.style.left = `${centerX}px`;
            noButton.style.top = `${centerY}px`;
            noButton.style.transformOrigin = `-100px 0`; // Smaller radius (100px instead of 150px)
            
            // Add click event that makes it jump to opposite side
            noButton.addEventListener('click', function(e) {
                e.preventDefault();
                e.stopPropagation();
                
                // Stop the rotation animation temporarily
                noButton.classList.remove('rotate-around');
                
                // Calculate opposite position
                const currentTransform = getComputedStyle(noButton).transform;
                const matrix = new DOMMatrix(currentTransform);
                const currentAngle = Math.atan2(matrix.b, matrix.a) * (180 / Math.PI);
                
                // Move to opposite side (180 degrees)
                const oppositeAngle = currentAngle + 180;
                const radius = 100; // SMALLER RADIUS (100px instead of 150px)
                
                const currentX = Math.cos(currentAngle * Math.PI / 180) * radius;
                const currentY = Math.sin(currentAngle * Math.PI / 180) * radius;
                
                const oppositeX = Math.cos(oppositeAngle * Math.PI / 180) * radius;
                const oppositeY = Math.sin(oppositeAngle * Math.PI / 180) * radius;
                
                // Set CSS variables for the move animation
                noButton.style.setProperty('--start-x', `${currentX}px`);
                noButton.style.setProperty('--start-y', `${currentY}px`);
                noButton.style.setProperty('--end-x', `${oppositeX}px`);
                noButton.style.setProperty('--end-y', `${oppositeY}px`);
                
                // Apply the move animation
                noButton.classList.add('move-to-opposite');
                
                // After animation completes, restart rotation
                setTimeout(() => {
                    noButton.classList.remove('move-to-opposite');
                    noButton.classList.add('rotate-around');
                }, 800);
                
                // Play a cute sound or do something fun
                console.log("Nice try! But you can only choose Yes! ❤️");
            });
            
            // Add hover event that speeds up rotation
            noButton.addEventListener('mouseover', function() {
                noButton.style.animationDuration = '4s'; // Faster when hovered
            });
            
            noButton.addEventListener('mouseout', function() {
                noButton.style.animationDuration = '15s'; // Slower normal speed
            });
        }
        
        // Initialize hearts for page 3
        function initHearts() {
            const heartContainer = document.getElementById('heartContainer');
            heartContainer.innerHTML = '';
            
            // Create 25 floating hearts
            for (let i = 0; i < 25; i++) {
                const heart = document.createElement('div');
                heart.classList.add('heart');
                
                // Random position
                const left = Math.random() * 100;
                heart.style.left = `${left}%`;
                
                // Random animation delay and duration
                const delay = Math.random() * 5;
                const duration = 5 + Math.random() * 5;
                heart.style.animationDelay = `${delay}s`;
                heart.style.animationDuration = `${duration}s`;
                
                heartContainer.appendChild(heart);
            }
        }
        
        // Initialize fireworks for page 3
        function initFireworks() {
            const container = document.getElementById('fireworksContainer');
            container.innerHTML = '';
            
            // Create different types of fireworks
            const fireworkTypes = [
                {color: '#ff4d8d', shape: 'heart', name: 'heartExplode'},
                {color: '#ffb3d1', shape: 'heart', name: 'heartExplode'},
                {color: '#ff9ebb', shape: 'circle', name: 'circleExplode'},
                {color: '#ff6b9d', shape: 'ring', name: 'ringExplode'},
                {color: '#ffd1dc', shape: 'star', name: 'starExplode'},
                {color: '#ff85b1', shape: 'circle', name: 'circleExplode'},
                {color: '#e11d48', shape: 'heart', name: 'heartExplode'},
                {color: '#be185d', shape: 'ring', name: 'ringExplode'},
                {color: '#9d174d', shape: 'star', name: 'starExplode'},
                {color: '#ffffff', shape: 'circle', name: 'circleExplode'}
            ];
            
            // Create initial fireworks
            for (let i = 0; i < 30; i++) {
                setTimeout(() => {
                    createFirework(fireworkTypes[i % fireworkTypes.length]);
                }, i * 200);
            }
            
            // Continue creating fireworks periodically
            setInterval(() => {
                const randomType = fireworkTypes[Math.floor(Math.random() * fireworkTypes.length)];
                createFirework(randomType);
            }, 600);
        }
        
        function createFirework(type) {
            const container = document.getElementById('fireworksContainer');
            const firework = document.createElement('div');
            firework.classList.add('firework');
            
            // Set color based on type
            firework.style.backgroundColor = type.color;
            firework.style.boxShadow = `0 0 10px 2px ${type.color}`;
            
            // Random position
            const left = Math.random() * 100;
            const top = Math.random() * 100;
            firework.style.left = `${left}%`;
            firework.style.top = `${top}%`;
            
            // Different size based on shape
            let size = 5;
            if (type.shape === 'heart' || type.shape === 'star') {
                size = 6;
            } else if (type.shape === 'ring') {
                size = 8;
            }
            
            firework.style.width = `${size}px`;
            firework.style.height = `${size}px`;
            
            // Apply animation
            firework.style.animation = `${type.name} 1.5s ease-out forwards`;
            
            container.appendChild(firework);
            
            // Remove firework after animation completes
            setTimeout(() => {
                if (firework.parentNode === container) {
                    container.removeChild(firework);
                }
            }, 1500);
        }
        
        // Handle audio based on page
        function handlePageAudio() {
            const bgMusic = document.getElementById('bgMusic');
            const fireworksSound = document.getElementById('fireworksSound');
            
            if (currentPage === 3) {
                // Page 3: fireworks sound
                bgMusic.pause();
                fireworksSound.volume = 0.6;
            } else {
                // Pages 1 and 2: romantic music
                fireworksSound.pause();
                bgMusic.volume = 0.5;
            }
        }
        
        // Audio controls
        document.getElementById('muteButton').addEventListener('click', function() {
            const bgMusic = document.getElementById('bgMusic');
            const fireworksSound = document.getElementById('fireworksSound');
            const icon = this.querySelector('i');
            
            if (bgMusic.muted && fireworksSound.muted) {
                bgMusic.muted = false;
                fireworksSound.muted = false;
                icon.classList.remove('fa-volume-mute');
                icon.classList.add('fa-volume-up');
            } else {
                bgMusic.muted = true;
                fireworksSound.muted = true;
                icon.classList.remove('fa-volume-up');
                icon.classList.add('fa-volume-mute');
            }
        });
        
        document.getElementById('replayButton').addEventListener('click', function() {
            const bgMusic = document.getElementById('bgMusic');
            const fireworksSound = document.getElementById('fireworksSound');
            
            bgMusic.currentTime = 0;
            fireworksSound.currentTime = 0;
            
            if (currentPage === 3) {
                fireworksSound.play().catch(e => console.log("Could not restart fireworks sound"));
            } else {
                bgMusic.play().catch(e => console.log("Could not restart music"));
            }
        });
        
        // Upload music functionality
        document.getElementById('musicUpload').addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (file) {
                const url = URL.createObjectURL(file);
                const bgMusic = document.getElementById('bgMusic');
                
                // Replace the audio source
                bgMusic.src = url;
                bgMusic.load();
                
                // Try to play if we're on page 1 or 2
                if (currentPage === 1 || currentPage === 2) {
                    bgMusic.play().catch(e => {
                        console.log("Music autoplay prevented.");
                    });
                }
                
                alert("Romantic music uploaded successfully! It will play on pages 1 and 2.");
            }
        });
        
        // Upload fireworks sound functionality
        document.getElementById('fireworksMusicUpload').addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (file) {
                const url = URL.createObjectURL(file);
                const fireworksSound = document.getElementById('fireworksSound');
                
                // Replace the audio source
                fireworksSound.src = url;
                fireworksSound.load();
                
                // If we're on page 3, play it
                if (currentPage === 3) {
                    fireworksSound.play().catch(e => {
                        console.log("Fireworks sound autoplay prevented.");
                    });
                }
                
                alert("Fireworks sound uploaded successfully! It will play on page 3.");
            }
        });
        
        // Auto-start background music on page load
        window.addEventListener('DOMContentLoaded', function() {
            // Try to play background music
            document.getElementById('bgMusic').volume = 0.5;
            document.getElementById('bgMusic').play().catch(e => {
                console.log("Autoplay prevented. Click anywhere on the page to start music.");
                // Show a notification for user to interact
                document.body.addEventListener('click', function initAudio() {
                    document.getElementById('bgMusic').play().catch(e => console.log("Still prevented"));
                    document.body.removeEventListener('click', initAudio);
                });
            });
            
            // Preload fireworks sound
            document.getElementById('fireworksSound').volume = 0.6;
            
            // Initialize page counter
            document.getElementById('currentPage').textContent = currentPage;
            
            // Initialize rotating no button for page 1
            initRotatingNoButton(1);
        });
    </script>
</body>
</html>
